app.controller("dashboardCtrl",function(n,t,i,r,u){function e(){f=u.getUsuario();n.usuario=f;f||(r.path("/login"),U2X_FechaLoader())}function o(){i({method:"POST",url:u.url+"/api/MovimentacaoInstitucional_Obtem",data:f}).then(function(t){n.lstMovimentacao=t.data;n.lstMovimentacao&&n.lstMovimentacao.length!=0||$(".tap-target").tapTarget("open")},function(n){console.log(n);Materialize.toast("Não foi possível realizar a operação",4e3);r.path("/");U2X_FechaLoader();return}).then(function(){i({method:"POST",url:u.url+"/api/TipoPagamento_Obtem",data:{id_instituicao:f.id_instituicao}}).then(function(t){if(n.lstTipoPagamento=t.data,!n.lstMovimentacao||n.lstMovimentacao.length==0){U2X_FechaLoader();return}n.lstMovimentacao.forEach(function(t){t.showMore=!1;t.isEntrada==0&&(t.valor=t.valor*-1);t.tipoPagamento=n.lstTipoPagamento.filter(function(n){return n.id==t.idTipoPagamento})[0]});n.lstTipoPagamento=n.lstTipoPagamento.filter(function(n){return n.is_ativo});n.entradaLiquida=0;n.entradaBruta=0;n.saidaLiquida=0;n.saidaBruta=0;n.investimentoLiquida=0;n.investimentoBruta=0;n.entradaLiquidaFutura=0;n.entradaBrutaFutura=0;n.saidaLiquidaFutura=0;n.saidaBrutaFutura=0;n.investimentoLiquidaFutura=0;n.investimentoBrutaFutura=0;n.lstMovimentacao.forEach(function(t){moment(t.data).isBefore(moment(Date()))?(t.isEntrada==0&&(n.saidaLiquida=n.saidaLiquida+t.valor*((t.tipoPagamento.cobranca_juros+100)/100),n.saidaBruta=n.saidaBruta+t.valor),t.isEntrada==1&&(n.entradaLiquida=n.entradaLiquida+t.valor*((t.tipoPagamento.cobranca_juros+100)/100),n.entradaBruta=n.entradaBruta+t.valor),t.isEntrada==2&&(n.investimentoLiquida=n.investimentoLiquida+t.valor*((t.tipoPagamento.cobranca_juros+100)/100),n.investimentoBruta=n.investimentoBruta+t.valor)):(t.isEntrada==0&&(n.saidaLiquidaFutura=n.saidaLiquidaFutura+t.valor*((t.tipoPagamento.cobranca_juros+100)/100),n.saidaBrutaFutura=n.saidaBrutaFutura+t.valor),t.isEntrada==1&&(n.entradaLiquidaFutura=n.entradaLiquidaFutura+t.valor*((t.tipoPagamento.cobranca_juros+100)/100),n.entradaBrutaFutura=n.entradaBrutaFutura+t.valor),t.isEntrada==2&&(n.investimentoLiquidaFutura=n.investimentoLiquidaFutura+t.valor*((t.tipoPagamento.cobranca_juros+100)/100),n.investimentoBrutaFutura=n.investimentoBrutaFutura+t.valor))});$(".collapsible").collapsible();U2X_FechaLoader()},function(n){console.log(n);Materialize.toast("Não foi possível realizar a operação",4e3);r.path("/");U2X_FechaLoader();return})})}var f;U2X_ConfiguraInterface();U2X_AbreLoader();e();o();n.getStyle=function(n){return n>0?"green":n==0?"black":"red"};n.trataValores=U2X_TrataValores;n.dataFormat=function(n){return moment(n).format("DD/MM/YYYY")};n.showAjudaConsolidado=function(){$("#mdlAjudaConsolidado").modal("open")};n.CloseAjudaConsolidado=function(){$(".modal").modal("close")};n.showAjudaFuturo=function(){$("#mdlAjudaFuturo").modal("open")};n.CloseAjudaFuturo=function(){$(".modal").modal("close")};n.showAjudaAtual=function(){$("#mdlAjudaAtual").modal("open")};n.CloseAjudaAtual=function(){$(".modal").modal("close")}});
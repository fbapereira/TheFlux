app.controller("alunosCtrl",function(n,t,i,r,u){function f(){U2X_AbreLoader();n.aluno.id_instituicao=u.getUsuario().id_instituicao;i({method:"POST",url:u.url+"/api/Aluno_Obtem",data:n.aluno}).then(function(t){n.alunos=t.data;n.alunosFiltered=n.alunos;n.sBusca&&n.changeBusca(n.sBusca);U2X_FechaLoader();$("#mdlNovoAluno").modal("close")},function(n){console.log(n);Materialize.toast("Não foi possível realizar a operação",4e3);U2X_FechaLoader()})}n.loggedUsuario=u.getUsuario();n.aluno={};n.alunos=[];n.loggedUsuario={};n.isEditing=!1;U2X_ConfiguraInterface();U2X_AbreLoader();f();n.changeBusca=function(t){n.alunosFiltered=n.alunos.filter(function(n){return t&&t.length==0||n.nome.toUpperCase().indexOf(t.toUpperCase())>-1||n.cpf.toUpperCase().indexOf(t.toUpperCase())>-1||n.email.toUpperCase().indexOf(t.toUpperCase())>-1?!0:!1})};n.btnAdd=function(){if(!n.aluno.nome||n.aluno.nome==""){Materialize.toast("Digite o [Nome].",4e3);return}if(!n.aluno.cpf||n.aluno.cpf==""){Materialize.toast("Digite o [cpf].",4e3);return}if(!U2X_ValidaCPFCNPJ(n.aluno.cpf)){Materialize.toast("O [cpf] é inválido.",4e3);return}if(!n.aluno.email||n.aluno.email==""){Materialize.toast("Digite o [e-mail].",4e3);return}if(!U2X_ValidateEmail(n.aluno.email)){Materialize.toast("O [e-mail] é inválido.",4e3);return}n.aluno.id_instituicao=u.getUsuario().id_instituicao;U2X_AbreLoader();var t="";t=n.isEditing?"/api/Aluno_Editar":"/api/Aluno_Adicionar";i({method:"POST",url:u.url+t,data:n.aluno}).then(function(){$("#mdlNovoAluno").modal("close");f();n.isEditing?Materialize.toast("Aluno editado com sucesso.",4e3):Materialize.toast("Aluno cadastrado com sucesso.",4e3);U2X_FechaLoader()},function(n){console.log(n);U2X_FechaLoader();Materialize.toast("Não foi possível realizar a operação",4e3)})};n.AbreModalCriaAluno=function(t){n.isEditing=Boolean(t);n.aluno=t;$("#mdlNovoAluno").modal("open")};n.AddMensalidades=function(n){u.setAluno(n);r.path("/mensalidade")};n.FechaModal=function(){n.aluno?f():$("#mdlNovoAluno").modal("close")}});
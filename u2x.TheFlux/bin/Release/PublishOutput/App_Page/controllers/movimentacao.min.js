app.controller("movimentacaoCtrl",function(n,t,i,r,u){function f(){U2X_AbreLoader();i({method:"GET",url:u.url+"/api/TipoMovimentacao/"+e.id_instituicao}).then(function(t){n.lstTipoMovimentacao=t.data;U2X_FechaLoader();n.changeBusca(n.sBusca,n.bAtivos)},function(n){U2X_TrataErro(n);U2X_FechaLoader();return})}function o(t){n.lstTipoMovimentacaoFiltered=n.lstTipoMovimentacao.filter(function(n){return t&&t.length>0&&n.nome.toUpperCase().indexOf(t.toUpperCase())==-1?!1:n.is_canceled?!1:!0})}U2X_ConfiguraInterface();var e=U2X_ValidaLogin(u.getUsuario());f();n.OpenAddStatus=function(){$("#mdlChangePassword").modal("open")};n.CloseAddStatus=function(){$("#mdlChangePassword").modal("close")};n.AddStatus=function(){if(!n.descricao||n.descricao==""){Materialize.toast("Digite o [descricao] do novo Tipo de Gasto.",4e3);return}var t={};t.id_instituicao=e.id_instituicao;t.descricao=n.descricao;t.is_ativo=!0;U2X_AbreLoader();i({method:"POST",url:u.url+"/api/TipoMovimentacao",data:t}).then(function(){Materialize.toast("Tipo de Gasto adicionado com sucesso",4e3);U2X_FechaLoader();n.CloseAddStatus();f();n.changeBusca(n.sBusca,n.bAtivos)},function(n){U2X_TrataErro(n);U2X_FechaLoader();return})};n.changeBusca=function(n,t){o(n,t)};n.Alterar=function(n,t){n.is_canceled=!t;var r=n.is_canceled?"reativado":"cancelado",e=n.is_canceled?1:0;U2X_AbreLoader();i({method:"GET",url:u.url+"/api/TipoMovimentacao/AlteraStatus/"+n.id+"/"+e,data:n}).then(function(){Materialize.toast("O Tipo de Gasto foi "+r,4e3);U2X_FechaLoader();f()},function(n){U2X_TrataErro(n);U2X_FechaLoader();return})}});
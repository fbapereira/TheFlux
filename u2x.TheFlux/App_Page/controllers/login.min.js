app.controller("loginCtrl",function(n,t,i,r,u){function o(){return new Promise(function(n){i({method:"GET",url:u.url+"/api/Instituicao/"+f.id,data:f}).then(function(t){t&&t.data&&n(t.data);n(0)},function(){n(0)})})}function e(){U2X_AbreLoader();i({method:"POST",url:u.url+"/api/Login",data:f}).then(function(t){if(f=t.data,!f){u.setUsuario({});Materialize.toast("Usuario ou senha inválidos",4e3);r.path("/");U2X_FechaLoader();return}u.setUsuario(f);o().then(function(t){n.$emit("usuario_logado",u.getUsuario());U2X_FechaLoader();u.setInstituicao(t)},function(n){console.log(n);Materialize.toast("Não foi possível realizar o login",4e3);r.path("/");U2X_FechaLoader();return}).then(function(){var t=u.getInstituicao();if(t.idTipo==1){if(f.isAdmin){r.path("/dashboard_admin");n.$apply();return}r.path("/dashboard_aluno");n.$apply();return}r.path("/dashboard");n.$apply();return})},function(n){console.log(n);Materialize.toast("Não foi possível realizar o login",4e3);r.path("/");U2X_FechaLoader();return})}var f;U2X_ConfiguraInterface();U2X_AbreLoader();f=u.getUsuario();f?e():U2X_FechaLoader();n.Login=function(){f={};f.login=n.login;f.senha=n.senha;e()}});